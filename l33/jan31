import speech_recognition as sr
import pyttsx3
import googletrans import Translator

def speak (text,language="en"):
    engine=pyttsx3.init()
    engine.setProperty('rate', 150)
    voices=engine.getProperty('voices')

    if language =="en":
        engine.setProperty('voices',voices[0].id)
    else:
        engine.setProperty('voices', voices[1].id)

    engine.say(text)
    engine.runAndWait()

def speech_to_text():
    recognizer=sr.Recognizer()
    with sr.microphone() as source:
        print("???????? Please sepak noww in english .........")
        audio=recognizer.listen(source)

    try:
        print("??? Recognizing speech ")
        text=recognizer.recognize_google(audio,language="en-US")
        print(f"you said{text}")
        return text
    except sr.UnkownValueError:
        print("Could not unserstand the audio")
    except sr.RewustError as e:
        print(f"API Error:{0}")
    return ""

def translate_text(text,target_language="es"):
    translator=Translator()
    translation=translator.translate(text, dest=target_language)
    print(f"???? Translated Text :{translation.text}")
    return translation.text

def display_language_options():
    print("\n???? Available trabslation languages:")
    print("\n1. Hindi(hi)")
    print("\n2. Tamil(ta)")
    print("\n3. Tegulu(te) ")
    print("\n4.Bengali(bn)")
    print("\n5. Marathaji(mr)")
    print("\n6. Guarati(gu)")
    print("\n7. Malayalam(ml)")
    print("\n8. Punjabi(pa)")

    chocie =input ("Please select the tagregt language number (1-8)")
    langauge_dict={
        "1":"hi", "2":"ta", "3":"te", "4":"bn", "5":"mr", "6":"gu", "7":"ml", "8":"pa"
    }
    return langauge_dict.get(chocie, "en")

def main():
    target_language=display_language_options()
    original_text=speech_to_text()
    if original_text:
        translated_text=translate_text(original_text,target_language=target_language)
        speak(translated_text,language="en")
        print("Translation spoke out!")

if __name__=="__main__":
    main()


